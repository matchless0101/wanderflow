# 地图文字搜索与可选节点路径设计

## 目标
- 在地图页提供文字搜索入口，返回高德 POI 列表
- 支持用户点亮/取消候选节点
- 允许用户固定终点，生成最优路线顺序并绘制
- 复用现有路线展示与右上任务面板

## 范围
- 搜索与候选点选择
- 固定终点与路径生成
- 任务面板联动与完成状态

不包括：
- AI 静默重算与重要节点替换流程
- 交通方式的复杂策略推荐

## 架构与组件
- MapView：新增“文字搜索入口”，弹出搜索面板
- SearchPanelView：搜索输入、结果列表、点亮/取消、固定终点选择、生成路径按钮
- AmapManager：封装关键词搜索 API，返回 POI 列表（含名称与坐标）
- RoutePlanStore：增加从候选 POI 集合生成 Waypoint 列表的入口

## 数据流
1. 用户输入关键词并触发搜索
2. AmapManager 调用高德搜索 API，返回 POI 列表
3. 用户点亮/取消候选节点并指定终点
4. 生成路径时：
   - 终点保持固定
   - 其余点位由现有优化流程排序
5. RoutePlanStore 生成 waypoints 并触发路线计算与绘制
6. 右上任务面板展示任务列表与完成状态

## 失败与提示
- 搜索失败：提示“搜索失败，请重试”
- 无结果：提示“未找到相关地点”

## 验收要点
- 搜索结果可点亮/取消
- 终点固定后生成路线顺序合理
- 路线绘制与任务面板联动正常
